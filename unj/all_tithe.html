<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View</title>
    <link rel="stylesheet" href="view.css">
</head>
<body>
    <header>
        <img src="images/church logo.jpg">
        <h1>Christian Praise Family Chapel</h1>
    </header>

    <table id="members_table" border="2">
        <tr>
            <th>Member ID</th>
            <th>Member Name</th>
            <th>Gender</th>
            <th>Address</th>
            <th>Phone Number</th>
            <th>Hometown</th>
        </tr>
        <tr>

        </tr>
    </table>
</body>

<script>
    function search() {
    const query = document.getElementById('search_text').value;

    // Fetch data from search.php
    fetch(`search.php?query=${encodeURIComponent(query)}`)
        .then(response => response.json())
        .then(result => {
            if (result.success) {
                // Get table body element
                const tableBody = document.querySelector('#members_table tbody');
                
                // Clear any existing rows
                tableBody.innerHTML = '';

                // Iterate over the results and create table rows
                result.results.forEach(member => {
                    const row = document.createElement('tr');

                    row.innerHTML = `
                        <td>${member.id}</td>
                        <td>${member.name}</td>
                        <td>${member.gender}</td>
                        <td>${member.address}</td>
                        <td>${member.phone}</td>
                        <td>${member.hometown}</td>
                    `;
                    
                    tableBody.appendChild(row);
                });
            } else {
                alert('No results found or an error occurred');
            }
        })
        .catch(error => {
            console.error('Fetch error:', error);
            alert('There was a problem with the fetch operation.');
        });
}

// Assuming you have a search button or form that calls this function
document.getElementById('search_button').addEventListener('click', search);
</script>
</html>